---
// Node animation component - shows nodes connecting to each other
---

<div class="node-canvas" id="nodeCanvas">
  <svg class="node-svg" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
    <!-- Connection lines (will be animated) -->
    <g class="connections">
      <path class="connection-line line-1" d="M150,200 Q250,150 350,200" />
      <path class="connection-line line-2" d="M350,200 Q450,300 550,250" />
      <path class="connection-line line-3" d="M550,250 Q600,350 650,300" />
      <path class="connection-line line-4" d="M150,200 Q200,350 300,400" />
      <path class="connection-line line-5" d="M300,400 Q450,450 550,250" />
    </g>

    <!-- Nodes -->
    <g class="nodes">
      <!-- Input Node -->
      <g class="node node-1" transform="translate(150, 200)">
        <rect x="-50" y="-25" width="100" height="50" rx="8" class="node-bg input-node" />
        <text class="node-label" text-anchor="middle" y="5">ðŸ’¬ Input</text>
        <circle cx="50" cy="0" r="6" class="node-port port-out" />
      </g>

      <!-- LLM Node -->
      <g class="node node-2" transform="translate(350, 200)">
        <rect x="-50" y="-25" width="100" height="50" rx="8" class="node-bg llm-node" />
        <text class="node-label" text-anchor="middle" y="5">ðŸ¤– LLM</text>
        <circle cx="-50" cy="0" r="6" class="node-port port-in" />
        <circle cx="50" cy="0" r="6" class="node-port port-out" />
      </g>

      <!-- TTS Node -->
      <g class="node node-3" transform="translate(550, 250)">
        <rect x="-50" y="-25" width="100" height="50" rx="8" class="node-bg tts-node" />
        <text class="node-label" text-anchor="middle" y="5">ðŸ”Š TTS</text>
        <circle cx="-50" cy="0" r="6" class="node-port port-in" />
        <circle cx="50" cy="0" r="6" class="node-port port-out" />
      </g>

      <!-- Avatar Node -->
      <g class="node node-4" transform="translate(650, 300)">
        <rect x="-50" y="-25" width="100" height="50" rx="8" class="node-bg avatar-node" />
        <text class="node-label" text-anchor="middle" y="5">ðŸ‘¤ Avatar</text>
        <circle cx="-50" cy="0" r="6" class="node-port port-in" />
      </g>

      <!-- Filter Node -->
      <g class="node node-5" transform="translate(300, 400)">
        <rect x="-50" y="-25" width="100" height="50" rx="8" class="node-bg filter-node" />
        <text class="node-label" text-anchor="middle" y="5">âš¡ Filter</text>
        <circle cx="-50" cy="0" r="6" class="node-port port-in" />
        <circle cx="50" cy="0" r="6" class="node-port port-out" />
      </g>
    </g>

    <!-- Data flow particles -->
    <g class="particles">
      <circle class="particle particle-1" r="4" />
      <circle class="particle particle-2" r="4" />
      <circle class="particle particle-3" r="4" />
    </g>
  </svg>
</div>

<style>
  .node-canvas {
    position: absolute;
    inset: 0;
    overflow: hidden;
    opacity: 0.8;
  }

  .node-svg {
    width: 100%;
    height: 100%;
  }

  /* Connection lines */
  .connection-line {
    fill: none;
    stroke: rgba(255, 255, 255, 0.2);
    stroke-width: 2;
    stroke-dasharray: 300;
    stroke-dashoffset: 300;
  }

  .line-1 { animation: drawLine 1.5s ease-out 0.2s forwards; }
  .line-2 { animation: drawLine 1.5s ease-out 0.6s forwards; }
  .line-3 { animation: drawLine 1.5s ease-out 1.0s forwards; }
  .line-4 { animation: drawLine 1.5s ease-out 0.4s forwards; }
  .line-5 { animation: drawLine 1.5s ease-out 0.8s forwards; }

  @keyframes drawLine {
    to {
      stroke-dashoffset: 0;
    }
  }

  /* Nodes */
  .node {
    opacity: 0;
    transform-origin: center;
  }

  .node-1 { animation: nodeAppear 0.5s ease-out 0s forwards; }
  .node-2 { animation: nodeAppear 0.5s ease-out 0.3s forwards; }
  .node-3 { animation: nodeAppear 0.5s ease-out 0.6s forwards; }
  .node-4 { animation: nodeAppear 0.5s ease-out 0.9s forwards; }
  .node-5 { animation: nodeAppear 0.5s ease-out 0.5s forwards; }

  @keyframes nodeAppear {
    from {
      opacity: 0;
      transform: scale(0.5);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .node-bg {
    fill: rgba(30, 30, 40, 0.9);
    stroke-width: 2;
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
  }

  .input-node { stroke: #10b981; }
  .llm-node { stroke: #8b5cf6; }
  .tts-node { stroke: #f59e0b; }
  .avatar-node { stroke: #ec4899; }
  .filter-node { stroke: #06b6d4; }

  .node-label {
    fill: white;
    font-size: 12px;
    font-weight: 500;
  }

  .node-port {
    fill: rgba(255, 255, 255, 0.8);
  }

  .port-in { fill: rgba(255, 255, 255, 0.5); }
  .port-out { fill: rgba(255, 255, 255, 0.8); }

  /* Floating animation for nodes */
  .nodes {
    animation: floatNodes 6s ease-in-out infinite;
  }

  @keyframes floatNodes {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  /* Data flow particles */
  .particle {
    fill: #8b5cf6;
    opacity: 0;
  }

  .particle-1 {
    animation: flowParticle1 3s ease-in-out 2s infinite;
  }

  .particle-2 {
    animation: flowParticle2 3s ease-in-out 2.5s infinite;
  }

  .particle-3 {
    animation: flowParticle3 3s ease-in-out 3s infinite;
  }

  @keyframes flowParticle1 {
    0% {
      opacity: 0;
      offset-path: path('M150,200 Q250,150 350,200');
      offset-distance: 0%;
    }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% {
      opacity: 0;
      offset-path: path('M150,200 Q250,150 350,200');
      offset-distance: 100%;
    }
  }

  @keyframes flowParticle2 {
    0% {
      opacity: 0;
      offset-path: path('M350,200 Q450,300 550,250');
      offset-distance: 0%;
    }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% {
      opacity: 0;
      offset-path: path('M350,200 Q450,300 550,250');
      offset-distance: 100%;
    }
  }

  @keyframes flowParticle3 {
    0% {
      opacity: 0;
      offset-path: path('M550,250 Q600,350 650,300');
      offset-distance: 0%;
    }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% {
      opacity: 0;
      offset-path: path('M550,250 Q600,350 650,300');
      offset-distance: 100%;
    }
  }

  /* Hover effects */
  .node:hover .node-bg {
    filter: drop-shadow(0 4px 20px rgba(139, 92, 246, 0.5));
  }

  /* Responsive */
  @media (max-width: 768px) {
    .node-svg {
      transform: scale(0.7);
      transform-origin: center;
    }
  }
</style>
